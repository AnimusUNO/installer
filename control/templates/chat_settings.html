<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat Settings - Sanctum Configurator</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="{{ url_for('static', filename='styles.css') }}" rel="stylesheet">
    <link href="{{ url_for('static', filename='chat_settings.css') }}" rel="stylesheet">
</head>
<body>
    <!-- Header -->
    <header class="d-flex align-items-center justify-content-between p-2 px-3 border-bottom">
        <div class="d-flex align-items-center gap-2">
            <a href="/settings" class="btn btn-link text-light text-decoration-none p-0 fw-medium">
                ← Back to Settings
            </a>
        </div>
        <div class="d-flex align-items-center gap-3">
            <span class="text-muted small">Status: <span class="text-success">● Healthy</span> v1.0.0</span>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container-fluid px-0 d-flex flex-column">
        <div class="container px-3 py-4">
            <!-- Page Title -->
            <div class="mb-4">
                <h1 class="h3 mb-1">Chat Settings</h1>
                <p class="text-muted mb-0">Configure chat parameters for your agents</p>
            </div>

            <!-- Agent Selector -->
            <div class="mb-4">
                <div class="d-flex align-items-center gap-2">
                    <label for="agentSelector" class="text-muted small mb-0">Prime Agent:</label>
                    <select class="form-select form-select-sm bg-dark text-light border-secondary" id="agentSelector" style="width: auto; min-width: 200px;">
                        <option value="athena">Athena</option>
                        <option value="monday">Monday</option>
                        <option value="timbre">Timbre</option>
                    </select>
                </div>
            </div>

            <!-- Chat Settings Form -->
            <div class="row">
                <div class="col-lg-8">
                    <form id="chatSettingsForm">
                        <!-- Non-configurable Fields -->
                        <div class="card bg-dark border-secondary mb-4">
                            <div class="card-header bg-dark border-secondary">
                                <h5 class="mb-0 text-light">System Information</h5>
                            </div>
                            <div class="card-body">
                                <div class="mb-3">
                                    <label class="form-label text-muted small">Agent UID</label>
                                    <input type="text" class="form-control bg-dark text-light border-secondary" id="agentUID" readonly value="agent-24ab7439-7f33-4665-8aa4-9ba709694e1a">
                                    <div class="form-text text-muted">Unique identifier for this agent (read-only)</div>
                                </div>
                            </div>
                        </div>

                        <!-- Configurable Fields -->
                        <div class="card bg-dark border-secondary mb-4">
                            <div class="card-header bg-dark border-secondary">
                                <h5 class="mb-0 text-light">Chat Configuration</h5>
                            </div>
                            <div class="card-body">
                                <!-- Agent Name -->
                                <div class="mb-3">
                                    <label for="agentName" class="form-label text-light">Agent Name</label>
                                    <input type="text" class="form-control bg-dark text-light border-secondary" id="agentName" placeholder="Enter agent name">
                                </div>

                                <!-- Model Selection -->
                                <div class="mb-3">
                                    <label for="modelSelect" class="form-label text-light">Model</label>
                                    <select class="form-select bg-dark text-light border-secondary" id="modelSelect">
                                        <option value="gpt-4">GPT-4</option>
                                        <option value="gpt-4-turbo">GPT-4 Turbo</option>
                                        <option value="gpt-3.5-turbo">GPT-3.5 Turbo</option>
                                        <option value="claude-3-opus">Claude 3 Opus</option>
                                        <option value="claude-3-sonnet">Claude 3 Sonnet</option>
                                        <option value="claude-3-haiku">Claude 3 Haiku</option>
                                        <option value="gemini-pro">Gemini Pro</option>
                                        <option value="llama-3-70b">Llama 3 70B</option>
                                        <option value="llama-3-8b">Llama 3 8B</option>
                                    </select>
                                </div>

                                <!-- System Instructions -->
                                <div class="mb-3">
                                    <label for="systemInstructions" class="form-label text-light">System Instructions</label>
                                    <div class="position-relative">
                                        <textarea class="form-control bg-dark text-light border-secondary" id="systemInstructions" rows="8" placeholder="Enter system instructions for this agent..."></textarea>
                                        <div class="position-absolute top-0 end-0 p-2">
                                            <button type="button" class="btn btn-sm btn-outline-secondary" id="expandInstructions" title="Expand/Collapse">
                                                <span id="expandIcon">⤢</span>
                                            </button>
                                        </div>
                                    </div>
                                    <div class="form-text text-muted">Core instructions that define this agent's behavior and capabilities</div>
                                </div>

                                <!-- Model Parameters -->
                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="mb-3">
                                            <label for="maxTokens" class="form-label text-light">Max Output Tokens</label>
                                            <input type="number" class="form-control bg-dark text-light border-secondary" id="maxTokens" min="1" max="32000" value="4000">
                                            <div class="form-text text-muted">Maximum tokens in response</div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="mb-3">
                                            <label for="contextWindow" class="form-label text-light">Context Window</label>
                                            <input type="number" class="form-control bg-dark text-light border-secondary" id="contextWindow" min="1000" max="200000" value="16000">
                                            <div class="form-text text-muted">Maximum context length</div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="mb-3">
                                            <label for="temperature" class="form-label text-light">Temperature</label>
                                            <input type="number" class="form-control bg-dark text-light border-secondary" id="temperature" min="0" max="2" step="0.1" value="0.7">
                                            <div class="form-text text-muted">Creativity level (0-2)</div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Reasoning Toggle -->
                                <div class="mb-3">
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="reasoningToggle">
                                        <label class="form-check-label text-light" for="reasoningToggle">
                                            Enable Reasoning
                                        </label>
                                    </div>
                                    <div class="form-text text-muted">Enable the agent to utilize reasoning and step-by-step thinking</div>
                                </div>
                            </div>
                        </div>

                        <!-- Action Buttons -->
                        <div class="d-flex gap-2">
                            <button type="submit" class="btn btn-primary">Save Changes</button>
                            <button type="button" class="btn btn-outline-secondary" id="resetDefaults">Reset to Defaults</button>
                            <button type="button" class="btn btn-outline-info" id="exportConfig">Export Config</button>
                        </div>
                    </form>
                </div>

                <!-- Preview Panel -->
                <div class="col-lg-4">
                    <div class="card bg-dark border-secondary">
                        <div class="card-header bg-dark border-secondary">
                            <h6 class="mb-0 text-light">Configuration Preview</h6>
                        </div>
                        <div class="card-body">
                            <div class="mb-3">
                                <small class="text-muted">Current Agent:</small>
                                <div class="text-light fw-medium" id="previewAgent">Athena</div>
                            </div>
                            <div class="mb-3">
                                <small class="text-muted">Model:</small>
                                <div class="text-light" id="previewModel">GPT-4</div>
                            </div>
                            <div class="mb-3">
                                <small class="text-muted">Parameters:</small>
                                <div class="text-light small">
                                    <div>Tokens: <span id="previewTokens">4000</span></div>
                                    <div>Context: <span id="previewContext">16000</span></div>
                                    <div>Temperature: <span id="previewTemp">0.7</span></div>
                                </div>
                            </div>
                            <div class="mb-3">
                                <small class="text-muted">Features:</small>
                                <div class="text-light small">
                                    <div>Reasoning: <span id="previewReasoning">Disabled</span></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='chat_settings.js') }}"></script>
</body>
</html>
